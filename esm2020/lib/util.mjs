export function twoDigits(n) {
    return n < 10 ? `0${n}` : `${n}`;
}
export function addDays(date, days) {
    const result = new Date(date);
    result.setDate(result.getDate() + days);
    return result;
}
export function convertHoursForMode(hour, mode) {
    const isPm = hour >= 12;
    if (mode === '24h') {
        return { hour, isPm };
    }
    else if (hour === 0 || hour === 12) {
        return { hour: 12, isPm };
    }
    else if (hour < 12) {
        return { hour, isPm };
    }
    return { hour: hour - 12, isPm };
}
function mod(a, b) {
    return a - Math.floor(a / b) * b;
}
export function getShortestAngle(from, to) {
    const difference = to - from;
    return from + mod(difference + 180, 360) - 180;
}
export function isDateInRange(minDate, maxDate, current) {
    const unixCurrentDate = +current;
    return (!minDate || +minDate <= unixCurrentDate) && (!maxDate || unixCurrentDate <= +maxDate);
}
export function isTimeInRange(minDate, maxDate, current) {
    if (minDate instanceof Date) {
        const newMinDate = new Date();
        newMinDate.setHours(minDate.getHours());
        newMinDate.setMinutes(minDate.getMinutes());
        newMinDate.setSeconds(0);
        newMinDate.setMilliseconds(0);
        minDate = newMinDate;
    }
    if (maxDate instanceof Date) {
        const newMaxDate = new Date();
        newMaxDate.setHours(maxDate.getHours());
        newMaxDate.setMinutes(maxDate.getMinutes());
        newMaxDate.setSeconds(0);
        newMaxDate.setMilliseconds(0);
        maxDate = newMaxDate;
    }
    if (current instanceof Date) {
        const newCurrent = new Date();
        newCurrent.setHours(current.getHours());
        newCurrent.setMinutes(current.getMinutes());
        newCurrent.setSeconds(0);
        newCurrent.setMilliseconds(0);
        current = newCurrent;
    }
    const unixCurrentDate = +current;
    return (!minDate || +minDate <= unixCurrentDate) && (!maxDate || unixCurrentDate <= +maxDate);
}
// used when generating the allowed maps
export function isAllowed(hour, minutes, minDate, maxDate, clockMode, selectedMeridiem) {
    if (hour > 24 || hour < 0 || minutes > 60 || minutes < 0) {
        return false;
    }
    if (!minDate && !maxDate) {
        return true;
    }
    if (clockMode === '12h') {
        if (hour === 12 && selectedMeridiem === 'AM') {
            hour = 0;
        }
        if (hour > 12) {
            hour -= 12;
        }
    }
    const checkDate = new Date();
    checkDate.setHours(hour);
    checkDate.setMinutes(minutes);
    checkDate.setSeconds(0);
    checkDate.setMilliseconds(0);
    return isDateInRange(minDate, maxDate, checkDate);
}
// used by the clock component to visually disable the not allowed values
export function getIsAvailabeFn(allowed12HourMap, allowed24HourMap, mode) {
    return (value, viewType, isPm, h) => {
        const isHourCheck = viewType === 'hours';
        const [hour, minutes] = isHourCheck ? [value, null] : [h, value];
        if (mode === '12h') {
            if (!allowed12HourMap) {
                return true;
            }
            const meridiem = isPm ? 'pm' : 'am';
            if (isHourCheck) {
                return !!Object.values(allowed12HourMap[meridiem][hour]).find(v => v === true);
            }
            return allowed12HourMap[meridiem][hour][minutes];
        }
        if (!allowed24HourMap) {
            return true;
        }
        if (isHourCheck) {
            return !!Object.values(allowed24HourMap[hour]).find(v => v === true);
        }
        return allowed24HourMap[hour][minutes];
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL21hdC10aW1lcGlja2VyL3NyYy9saWIvdXRpbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQSxNQUFNLFVBQVUsU0FBUyxDQUFDLENBQUM7SUFDekIsT0FBTyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDO0FBQ25DLENBQUM7QUFFRCxNQUFNLFVBQVUsT0FBTyxDQUFDLElBQVUsRUFBRSxJQUFZO0lBQzlDLE1BQU0sTUFBTSxHQUFHLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzlCLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDO0lBQ3hDLE9BQU8sTUFBTSxDQUFDO0FBQ2hCLENBQUM7QUFFRCxNQUFNLFVBQVUsbUJBQW1CLENBQUMsSUFBWSxFQUFFLElBQWU7SUFDL0QsTUFBTSxJQUFJLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQztJQUN4QixJQUFJLElBQUksS0FBSyxLQUFLLEVBQUU7UUFDbEIsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQztLQUN2QjtTQUFNLElBQUksSUFBSSxLQUFLLENBQUMsSUFBSSxJQUFJLEtBQUssRUFBRSxFQUFFO1FBQ3BDLE9BQU8sRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxDQUFDO0tBQzNCO1NBQU0sSUFBSSxJQUFJLEdBQUcsRUFBRSxFQUFFO1FBQ3BCLE9BQU8sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLENBQUM7S0FDdkI7SUFDRCxPQUFPLEVBQUUsSUFBSSxFQUFFLElBQUksR0FBRyxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUM7QUFDbkMsQ0FBQztBQUVELFNBQVMsR0FBRyxDQUFDLENBQUMsRUFB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QUFRLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztZQUNwQyxJQUFJLFdBQVcsRUFBRTtnQkFDZixPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDO2FBQ2hGO1lBQ0QsT0FBTyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQztTQUNsRDtRQUVELElBQUksQ0FBQyxnQkFBZ0IsRUFBRTtZQUFFLE9BQU8sSUFBSSxDQUFDO1NBQUU7UUFFdkMsSUFBSSxXQUFXLEVBQUU7WUFDZixPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDO1NBQ3RFO1FBQ0QsT0FBTyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUN6QyxDQUFDLENBQUM7QUFDSixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSVRpbWVEYXRhLCBDbG9ja1ZpZXdUeXBlLCBDbG9ja01vZGUgfSBmcm9tICcuL2ludGVyZmFjZXMtYW5kLXR5cGVzJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB0d29EaWdpdHMobikge1xyXG4gIHJldHVybiBuIDwgMTAgPyBgMCR7bn1gIDogYCR7bn1gO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYWRkRGF5cyhkYXRlOiBEYXRlLCBkYXlzOiBudW1iZXIpIHtcclxuICBjb25zdCByZXN1bHQgPSBuZXcgRGF0ZShkYXRlKTtcclxuICByZXN1bHQuc2V0RGF0ZShyZXN1bHQuZ2V0RGF0ZSgpICsgZGF5cyk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRIb3Vyc0Zvck1vZGUoaG91cjogbnVtYmVyLCBtb2RlOiBDbG9ja01vZGUpIHtcclxuICBjb25zdCBpc1BtID0gaG91ciA+PSAxMjtcclxuICBpZiAobW9kZSA9PT0gJzI0aCcpIHtcclxuICAgIHJldHVybiB7IGhvdXIsIGlzUG0gfTtcclxuICB9IGVsc2UgaWYgKGhvdXIgPT09IDAgfHwgaG91ciA9PT0gMTIpIHtcclxuICAgIHJldHVybiB7IGhvdXI6IDEyLCBpc1BtIH07XHJcbiAgfSBlbHNlIGlmIChob3VyIDwgMTIpIHtcclxuICAgIHJldHVybiB7IGhvdXIsIGlzUG0gfTtcclxuICB9XHJcbiAgcmV0dXJuIHsgaG91cjogaG91ciAtIDEyLCBpc1BtIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1vZChhLCBiKSB7XHJcbiAgcmV0dXJuIGEgLSBNYXRoLmZsb29yKGEgLyBiKSAqIGI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRTaG9ydGVzdEFuZ2xlKGZyb20sIHRvKSB7XHJcbiAgY29uc3QgZGlmZmVyZW5jZSA9IHRvIC0gZnJvbTtcclxuICByZXR1cm4gZnJvbSArIG1vZChkaWZmZXJlbmNlICsgMTgwLCAzNjApIC0gMTgwO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNEYXRlSW5SYW5nZShtaW5EYXRlOiBEYXRlLCBtYXhEYXRlOiBEYXRlLCBjdXJyZW50OiBEYXRlKSB7XHJcbiAgY29uc3QgdW5peEN1cnJlbnREYXRlID0gK2N1cnJlbnQ7XHJcbiAgcmV0dXJuICghbWluRGF0ZSB8fCArbWluRGF0ZSA8PSB1bml4Q3VycmVudERhdGUpICYmICghbWF4RGF0ZSB8fCB1bml4Q3VycmVudERhdGUgPD0gK21heERhdGUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNUaW1lSW5SYW5nZShtaW5EYXRlOiBEYXRlLCBtYXhEYXRlOiBEYXRlLCBjdXJyZW50OiBEYXRlKSB7XHJcbiAgaWYgKG1pbkRhdGUgaW5zdGFuY2VvZiBEYXRlKSB7XHJcbiAgICBjb25zdCBuZXdNaW5EYXRlID0gbmV3IERhdGUoKTtcclxuICAgIG5ld01pbkRhdGUuc2V0SG91cnMobWluRGF0ZS5nZXRIb3VycygpKTtcclxuICAgIG5ld01pbkRhdGUuc2V0TWludXRlcyhtaW5EYXRlLmdldE1pbnV0ZXMoKSk7XHJcbiAgICBuZXdNaW5EYXRlLnNldFNlY29uZHMoMCk7XHJcbiAgICBuZXdNaW5EYXRlLnNldE1pbGxpc2Vjb25kcygwKTtcclxuICAgIG1pbkRhdGUgPSBuZXdNaW5EYXRlO1xyXG4gIH1cclxuICBpZiAobWF4RGF0ZSBpbnN0YW5jZW9mIERhdGUpIHtcclxuICAgIGNvbnN0IG5ld01heERhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgbmV3TWF4RGF0ZS5zZXRIb3VycyhtYXhEYXRlLmdldEhvdXJzKCkpO1xyXG4gICAgbmV3TWF4RGF0ZS5zZXRNaW51dGVzKG1heERhdGUuZ2V0TWludXRlcygpKTtcclxuICAgIG5ld01heERhdGUuc2V0U2Vjb25kcygwKTtcclxuICAgIG5ld01heERhdGUuc2V0TWlsbGlzZWNvbmRzKDApO1xyXG4gICAgbWF4RGF0ZSA9IG5ld01heERhdGU7XHJcbiAgfVxyXG4gIGlmIChjdXJyZW50IGluc3RhbmNlb2YgRGF0ZSkge1xyXG4gICAgY29uc3QgbmV3Q3VycmVudCA9IG5ldyBEYXRlKCk7XHJcbiAgICBuZXdDdXJyZW50LnNldEhvdXJzKGN1cnJlbnQuZ2V0SG91cnMoKSk7XHJcbiAgICBuZXdDdXJyZW50LnNldE1pbnV0ZXMoY3VycmVudC5nZXRNaW51dGVzKCkpO1xyXG4gICAgbmV3Q3VycmVudC5zZXRTZWNvbmRzKDApO1xyXG4gICAgbmV3Q3VycmVudC5zZXRNaWxsaXNlY29uZHMoMCk7XHJcbiAgICBjdXJyZW50ID0gbmV3Q3VycmVudDtcclxuICB9XHJcbiAgY29uc3QgdW5peEN1cnJlbnREYXRlID0gK2N1cnJlbnQ7XHJcbiAgcmV0dXJuICghbWluRGF0ZSB8fCArbWluRGF0ZSA8PSB1bml4Q3VycmVudERhdGUpICYmICghbWF4RGF0ZSB8fCB1bml4Q3VycmVudERhdGUgPD0gK21heERhdGUpO1xyXG59XHJcblxyXG4vLyB1c2VkIHdoZW4gZ2VuZXJhdGluZyB0aGUgYWxsb3dlZCBtYXBzXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNBbGxvd2VkKFxyXG4gIGhvdXI6IG51bWJlcixcclxuICBtaW51dGVzOiBudW1iZXIsXHJcbiAgbWluRGF0ZTogRGF0ZSxcclxuICBtYXhEYXRlOiBEYXRlLFxyXG4gIGNsb2NrTW9kZTogQ2xvY2tNb2RlLFxyXG4gIHNlbGVjdGVkTWVyaWRpZW0/OiAnQU0nIHwgJ1BNJ1xyXG4pIHtcclxuICBpZiAoaG91ciA+IDI0IHx8IGhvdXIgPCAwIHx8IG1pbnV0ZXMgPiA2MCB8fCBtaW51dGVzIDwgMCkgeyByZXR1cm4gZmFsc2U7IH1cclxuXHJcbiAgaWYgKCFtaW5EYXRlICYmICFtYXhEYXRlKSB7IHJldHVybiB0cnVlOyB9XHJcblxyXG4gIGlmIChjbG9ja01vZGUgPT09ICcxMmgnKSB7XHJcbiAgICBpZiAoaG91ciA9PT0gMTIgJiYgc2VsZWN0ZWRNZXJpZGllbSA9PT0gJ0FNJykgeyBob3VyID0gMDsgfVxyXG4gICAgaWYgKGhvdXIgPiAxMikgeyBob3VyIC09IDEyOyB9XHJcbiAgfVxyXG4gIGNvbnN0IGNoZWNrRGF0ZSA9IG5ldyBEYXRlKCk7XHJcblxyXG4gIGNoZWNrRGF0ZS5zZXRIb3Vycyhob3VyKTtcclxuICBjaGVja0RhdGUuc2V0TWludXRlcyhtaW51dGVzKTtcclxuICBjaGVja0RhdGUuc2V0U2Vjb25kcygwKTtcclxuICBjaGVja0RhdGUuc2V0TWlsbGlzZWNvbmRzKDApO1xyXG5cclxuICByZXR1cm4gaXNEYXRlSW5SYW5nZShtaW5EYXRlLCBtYXhEYXRlLCBjaGVja0RhdGUpO1xyXG59XHJcblxyXG4vLyB1c2VkIGJ5IHRoZSBjbG9jayBjb21wb25lbnQgdG8gdmlzdWFsbHkgZGlzYWJsZSB0aGUgbm90IGFsbG93ZWQgdmFsdWVzXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0SXNBdmFpbGFiZUZuKGFsbG93ZWQxMkhvdXJNYXAsIGFsbG93ZWQyNEhvdXJNYXAsIG1vZGU6IENsb2NrTW9kZSkge1xyXG4gIHJldHVybiAodmFsdWU6IG51bWJlciwgdmlld1R5cGU6IENsb2NrVmlld1R5cGUsIGlzUG06IGJvb2xlYW4sIGg/OiBudW1iZXIpID0+IHtcclxuICAgIGNvbnN0IGlzSG91ckNoZWNrID0gdmlld1R5cGUgPT09ICdob3Vycyc7XHJcbiAgICBjb25zdCBbaG91ciwgbWludXRlc10gPSBpc0hvdXJDaGVjayA/IFt2YWx1ZSwgbnVsbF0gOiBbaCwgdmFsdWVdO1xyXG5cclxuICAgIGlmIChtb2RlID09PSAnMTJoJykge1xyXG4gICAgICBpZiAoIWFsbG93ZWQxMkhvdXJNYXApIHsgcmV0dXJuIHRydWU7IH1cclxuICAgICAgY29uc3QgbWVyaWRpZW0gPSBpc1BtID8gJ3BtJyA6ICdhbSc7XHJcbiAgICAgIGlmIChpc0hvdXJDaGVjaykge1xyXG4gICAgICAgIHJldHVybiAhIU9iamVjdC52YWx1ZXMoYWxsb3dlZDEySG91ck1hcFttZXJpZGllbV1baG91cl0pLmZpbmQodiA9PiB2ID09PSB0cnVlKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gYWxsb3dlZDEySG91ck1hcFttZXJpZGllbV1baG91cl1bbWludXRlc107XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFhbGxvd2VkMjRIb3VyTWFwKSB7IHJldHVybiB0cnVlOyB9XHJcblxyXG4gICAgaWYgKGlzSG91ckNoZWNrKSB7XHJcbiAgICAgIHJldHVybiAhIU9iamVjdC52YWx1ZXMoYWxsb3dlZDI0SG91ck1hcFtob3VyXSkuZmluZCh2ID0+IHYgPT09IHRydWUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFsbG93ZWQyNEhvdXJNYXBbaG91cl1bbWludXRlc107XHJcbiAgfTtcclxufVxyXG4iXX0=